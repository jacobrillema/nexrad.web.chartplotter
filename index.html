<!DOCTYPE html>
    <html>
        <head>
            <title>Nexrad WEB GL Plotter</title>
            <style>
                body {margin: 0;}
                canvas {width:100%; height:100%;}
            </style>
        </head>
        <body>
            <div style="position:absolute; background:#FFFFFF;padding: 5px; border-bottom-right-radius: 5px;">
            <select id="radar-files">
                <option>Radar File 1</option>
            </select>
            <button id="load">Load File</button>
            <button id="sweep">Start Sweep</button>
            <button id="zoomOut">Zoom Out</button>
            <button id="zoomIn">Zoom In</button>
        </div>
        <div id="display:none; position: absolute; left:40%; top:40%; padding: 100px; background: #FFFFFF; border-radius:10px;">Loading</div>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://d3js.org/d3.v5.js"></script>
        <script src="https://threejs.org/build/three.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var cameraPos = 200;
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            var renderer = new THREE.WebGLRenderer();
            var material = new THREE.PointsMaterial({
                size: 1,
                vertexColours: THREE.VertexColors
            })

            var sweeper = null
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.append(renderer.domElement);

            $(function() {
                var socket = io();
                var scan = 1;
                var totalScans = 0;

                $("#load").on("click", function() {
                    sweeper = null
                    var radar = $("#radar-files").val();

                    socket.emit('loadFile', 'KTLX20130520_200356_V06')
                });

                $("#sweep").on("click", function() {
                    scene.remove.apply(scene, scene.children);
                    scan = 1
                    sweeper = sweep()
                })

                function sweep() {
                    if(scan < totalScans || totalScans == 0) {
                        $("#load").attr('disabled', true);
                        socket.emit('sweep', scan);
                        scan++;
                    }
                }
            });
        </script>
        </body>
    </html>
</DOCTYPE>